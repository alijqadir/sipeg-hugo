{{- $section := .Section -}}
{{- if or (eq .Params.comments false) (not (or (eq $section "research") (eq $section "blog") (eq $section "posts"))) -}}
{{- /* Comments disabled or section not targeted */ -}}
{{- else -}}
<section class="comments-block">
  <h2 class="comments-heading">Discussion</h2>
  <p class="comments-subtitle">
    Join the conversation. Comments are powered by GitHub Discussions.
  </p>
  <script src="https://giscus.app/client.js"
          data-repo="YOUR_GITHUB_USERNAME/YOUR_REPO_NAME"
          data-repo-id="YOUR_REPO_ID"
          data-category="General"
          data-category-id="YOUR_CATEGORY_ID"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="dark"
          data-lang="en"
          crossorigin="anonymous"
          async>
  </script>
  <noscript>
    Please enable JavaScript to view the comments powered by Giscus.
  </noscript>
</section>
{{- end -}}
