(function(){const s=document.querySelector("[data-nav-toggle]"),e=document.querySelector("[data-nav-menu]"),i="a[href], button:not([disabled]), textarea, input, select";let o=null;if(s&&e){const n=s.querySelector("[data-hamburger]"),t=e=>{if(!n)return;n.classList.toggle("is-active",!!e)},a=()=>{e.classList.remove("is-open"),s.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",t(!1),o&&o.focus(),o=null};s.addEventListener("click",()=>{const n=e.classList.toggle("is-open");if(s.setAttribute("aria-expanded",String(n)),e.setAttribute("aria-hidden",String(!n)),t(n),n){o=document.activeElement;const t=e.querySelector(i);t&&t.focus(),document.body.style.overflow="hidden"}else document.body.style.overflow=""}),document.addEventListener("keyup",t=>{t.key==="Escape"&&e.classList.contains("is-open")&&a()}),e.addEventListener("click",e=>{e.target.matches("a")&&a()});const r=window.matchMedia("(min-width: 961px)"),c=n=>{n.matches&&(e.classList.remove("is-open"),s.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="",t(!1))};c(r),r.addEventListener("change",c)}const t=document.querySelector("[data-contact-form]");if(t){const e=t.querySelector("[data-contact-status]");t.addEventListener("submit",async n=>{n.preventDefault();const s=t.querySelector('input[name="hp_field"]');if(s&&s.value.trim()!=="")return;e&&(e.textContent="Sending…",e.setAttribute("aria-live","polite"));const o=t.dataset.endpoint,i=new FormData(t);try{if(!o)throw new Error("Missing endpoint");const n=await fetch(o,{method:"POST",body:i}),s=await n.text();if(!n.ok||!s.toLowerCase().includes("ok"))throw new Error(s||"Network response was not ok");t.reset(),e&&(e.textContent="Thank you for reaching out. We will respond shortly.")}catch{e&&(e.textContent="We were unable to submit the form. Please email info@sipeg.org.")}})}const n=document.querySelector("[data-newsletter-form]");if(n){const e=n.querySelector("[data-newsletter-status]");n.addEventListener("submit",async t=>{t.preventDefault();const s=n.querySelector('input[name="hp_field"]');if(s&&s.value.trim()!=="")return;e&&(e.textContent="Subscribing…");const o=n.dataset.endpoint,i=new FormData(n);try{if(!o)throw new Error("Missing endpoint");const t=await fetch(o,{method:"POST",body:i}),s=await t.text();if(!t.ok||!s.toLowerCase().includes("ok"))throw new Error(s||"Network response was not ok");n.reset(),e&&(e.textContent="Thanks for subscribing! Check your inbox for confirmation.")}catch{e&&(e.textContent="We could not subscribe you right now. Please try again or email info@sipeg.org.")}})}})()