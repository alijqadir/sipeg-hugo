(function(){const s=document.querySelector("[data-nav-toggle]"),e=document.querySelector("[data-nav-menu]"),i="a[href], button:not([disabled]), textarea, input, select";let o=null;if(s&&e){const n=s.querySelector("[data-hamburger]"),t=e=>{if(!n)return;n.classList.toggle("is-active",!!e)},a=()=>{e.classList.remove("is-open"),s.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",t(!1),o&&o.focus(),o=null};s.addEventListener("click",()=>{const n=e.classList.toggle("is-open");if(s.setAttribute("aria-expanded",String(n)),e.setAttribute("aria-hidden",String(!n)),t(n),n){o=document.activeElement;const t=e.querySelector(i);t&&t.focus(),document.body.style.overflow="hidden"}else document.body.style.overflow=""}),document.addEventListener("keyup",t=>{t.key==="Escape"&&e.classList.contains("is-open")&&a()}),e.addEventListener("click",e=>{e.target.matches("a")&&a()});const r=window.matchMedia("(min-width: 961px)"),c=n=>{n.matches&&(e.classList.remove("is-open"),s.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="",t(!1))};c(r),r.addEventListener("change",c)}const t=document.querySelector("[data-contact-form]");if(t){const e=t.querySelector("[data-contact-status]"),n=document.querySelector("[data-contact-success]"),s=document.querySelector(".contact-form__note");t.addEventListener("submit",async o=>{o.preventDefault();const i=t.querySelector('input[name="hp_field"]');if(i&&i.value.trim()!=="")return;e&&(e.textContent="Sending…",e.setAttribute("aria-live","polite"));const a=t.dataset.endpoint,r=new FormData(t);try{if(!a)throw new Error("Missing endpoint");const o=await fetch(a,{method:"POST",body:r}),i=await o.text();if(!o.ok||!i.toLowerCase().includes("ok"))throw new Error(i||"Network response was not ok");t.reset(),t.classList.add("is-success"),e&&(e.textContent=""),n&&(n.hidden=!1,n.classList.add("is-visible"),n.focus()),s&&s.classList.add("is-hidden")}catch{e&&(e.textContent="We were unable to submit the form. Please email info@sipeg.org.")}})}const n=document.querySelector("[data-newsletter-form]");if(n){const e=n.querySelector("[data-newsletter-status]"),t=document.querySelector("[data-newsletter-success]"),s=document.querySelector(".newsletter-note");n.addEventListener("submit",async o=>{o.preventDefault();const i=n.querySelector('input[name="hp_field"]');if(i&&i.value.trim()!=="")return;e&&(e.textContent="Subscribing…");const a=n.dataset.endpoint,r=new FormData(n);try{if(!a)throw new Error("Missing endpoint");const o=await fetch(a,{method:"POST",body:r}),i=await o.text();if(!o.ok||!i.toLowerCase().includes("ok"))throw new Error(i||"Network response was not ok");n.reset(),n.classList.add("is-success"),e&&(e.textContent=""),t&&(t.hidden=!1,t.classList.add("is-visible"),t.focus()),s&&s.classList.add("is-hidden")}catch{e&&(e.textContent="We could not subscribe you right now. Please try again or email info@sipeg.org.")}})}document.addEventListener("click",e=>{const o=e.target.closest('[href^="#"]');if(!o)return;const n=o.getAttribute("href");if(!n||n.charAt(0)!=="#")return;const t=document.querySelector(n);if(!t)return;const s=t.matches("[data-register-section]")?t:t.querySelector("[data-register-section]");if(!s)return;e.preventDefault();const i=120,a=s.getBoundingClientRect().top+window.scrollY-i;window.scrollTo({top:a,behavior:"smooth"}),s.focus({preventScroll:!0})})})()